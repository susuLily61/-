/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Se=Object.defineProperty;var Tt=Object.getOwnPropertyDescriptor;var Ft=Object.getOwnPropertyNames;var Ct=Object.prototype.hasOwnProperty;var Et=(n,t)=>{for(var e in t)Se(n,e,{get:t[e],enumerable:!0})},Nt=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ft(t))!Ct.call(n,s)&&s!==e&&Se(n,s,{get:()=>t[s],enumerable:!(i=Tt(t,s))||i.enumerable});return n};var Lt=n=>Nt(Se({},"__esModule",{value:!0}),n);var jt={};Et(jt,{default:()=>ke});module.exports=Lt(jt);var Ot=require("obsidian");var b=require("obsidian");var _e={de:"Deutsch",en:"English",es:"Espa\xF1ol",fr:"Fran\xE7ais",it:"Italiano",ja:"\u65E5\u672C\u8A9E",ko:"\uD55C\uAD6D\uC5B4",th:"\u0E44\u0E17\u0E22",vi:"Ti\u1EBFng Vi\u1EC7t","zh-CN":"\u7B80\u4F53\u4E2D\u6587","zh-TW":"\u7E41\u9AD4\u4E2D\u6587"},P={de:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],daysShort:["So","Mo","Di","Mi","Do","Fr","Sa"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],titleFormat:"MM y",format:"dd.mm.yyyy"},en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],titleFormat:"MM y",format:"mm/dd/yyyy"},es:{days:["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],daysShort:["Dom","Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],titleFormat:"MM y",format:"dd/mm/yyyy"},fr:{days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],daysShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],daysMin:["d","l","ma","me","j","v","s"],months:["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"],monthsShort:["janv.","f\xE9vr.","mars","avril","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],titleFormat:"MM y",format:"dd/mm/yyyy"},it:{days:["Domenica","Luned\xEC","Marted\xEC","Mercoled\xEC","Gioved\xEC","Venerd\xEC","Sabato"],daysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],daysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],titleFormat:"MM y",format:"dd/mm/yyyy"},ja:{days:["\u65E5\u66DC","\u6708\u66DC","\u706B\u66DC","\u6C34\u66DC","\u6728\u66DC","\u91D1\u66DC","\u571F\u66DC"],daysShort:["\u65E5","\u6708","\u706B","\u6C34","\u6728","\u91D1","\u571F"],daysMin:["\u65E5","\u6708","\u706B","\u6C34","\u6728","\u91D1","\u571F"],months:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],monthsShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],titleFormat:"y\u5E74mm\u6708",format:"yyyy/mm/dd"},ko:{days:["\uC77C\uC694\uC77C","\uC6D4\uC694\uC77C","\uD654\uC694\uC77C","\uC218\uC694\uC77C","\uBAA9\uC694\uC77C","\uAE08\uC694\uC77C","\uD1A0\uC694\uC77C"],daysShort:["\uC77C","\uC6D4","\uD654","\uC218","\uBAA9","\uAE08","\uD1A0"],daysMin:["\uC77C","\uC6D4","\uD654","\uC218","\uBAA9","\uAE08","\uD1A0"],months:["1\uC6D4","2\uC6D4","3\uC6D4","4\uC6D4","5\uC6D4","6\uC6D4","7\uC6D4","8\uC6D4","9\uC6D4","10\uC6D4","11\uC6D4","12\uC6D4"],monthsShort:["1\uC6D4","2\uC6D4","3\uC6D4","4\uC6D4","5\uC6D4","6\uC6D4","7\uC6D4","8\uC6D4","9\uC6D4","10\uC6D4","11\uC6D4","12\uC6D4"],titleFormat:"y\uB144mm\uC6D4",format:"yyyy-mm-dd"},th:{days:["\u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C","\u0E08\u0E31\u0E19\u0E17\u0E23\u0E4C","\u0E2D\u0E31\u0E07\u0E04\u0E32\u0E23","\u0E1E\u0E38\u0E18","\u0E1E\u0E24\u0E2B\u0E31\u0E2A","\u0E28\u0E38\u0E01\u0E23\u0E4C","\u0E40\u0E2A\u0E32\u0E23\u0E4C","\u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C"],daysShort:["\u0E2D\u0E32","\u0E08","\u0E2D","\u0E1E","\u0E1E\u0E24","\u0E28","\u0E2A","\u0E2D\u0E32"],daysMin:["\u0E2D\u0E32","\u0E08","\u0E2D","\u0E1E","\u0E1E\u0E24","\u0E28","\u0E2A","\u0E2D\u0E32"],months:["\u0E21\u0E01\u0E23\u0E32\u0E04\u0E21","\u0E01\u0E38\u0E21\u0E20\u0E32\u0E1E\u0E31\u0E19\u0E18\u0E4C","\u0E21\u0E35\u0E19\u0E32\u0E04\u0E21","\u0E40\u0E21\u0E29\u0E32\u0E22\u0E19","\u0E1E\u0E24\u0E29\u0E20\u0E32\u0E04\u0E21","\u0E21\u0E34\u0E16\u0E38\u0E19\u0E32\u0E22\u0E19","\u0E01\u0E23\u0E01\u0E0E\u0E32\u0E04\u0E21","\u0E2A\u0E34\u0E07\u0E2B\u0E32\u0E04\u0E21","\u0E01\u0E31\u0E19\u0E22\u0E32\u0E22\u0E19","\u0E15\u0E38\u0E25\u0E32\u0E04\u0E21","\u0E1E\u0E24\u0E28\u0E08\u0E34\u0E01\u0E32\u0E22\u0E19","\u0E18\u0E31\u0E19\u0E27\u0E32\u0E04\u0E21"],monthsShort:["\u0E21.\u0E04.","\u0E01.\u0E1E.","\u0E21\u0E35.\u0E04.","\u0E40\u0E21.\u0E22.","\u0E1E.\u0E04.","\u0E21\u0E34.\u0E22.","\u0E01.\u0E04.","\u0E2A.\u0E04.","\u0E01.\u0E22.","\u0E15.\u0E04.","\u0E1E.\u0E22.","\u0E18.\u0E04."],titleFormat:"MM y",format:"yyyy-mm-dd"},vi:{days:["Ch\u1EE7 nh\u1EADt","Th\u1EE9 hai","Th\u1EE9 ba","Th\u1EE9 t\u01B0","Th\u1EE9 n\u0103m","Th\u1EE9 s\xE1u","Th\u1EE9 b\u1EA3y"],daysShort:["CN","Th\u1EE9 2","Th\u1EE9 3","Th\u1EE9 4","Th\u1EE9 5","Th\u1EE9 6","Th\u1EE9 7"],daysMin:["CN","T2","T3","T4","T5","T6","T7"],months:["Th\xE1ng 1","Th\xE1ng 2","Th\xE1ng 3","Th\xE1ng 4","Th\xE1ng 5","Th\xE1ng 6","Th\xE1ng 7","Th\xE1ng 8","Th\xE1ng 9","Th\xE1ng 10","Th\xE1ng 11","Th\xE1ng 12"],monthsShort:["Th1","Th2","Th3","Th4","Th5","Th6","Th7","Th8","Th9","Th10","Th11","Th12"],titleFormat:"MM y",format:"dd/mm/yyyy"},"zh-CN":{days:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],daysShort:["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"],daysMin:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],months:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthsShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],titleFormat:"y\u5E74mm\u6708",format:"yyyy-mm-dd"},"zh-TW":{days:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],daysShort:["\u9031\u65E5","\u9031\u4E00","\u9031\u4E8C","\u9031\u4E09","\u9031\u56DB","\u9031\u4E94","\u9031\u516D"],daysMin:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],months:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthsShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],titleFormat:"y\u5E74mm\u6708",format:"yyyy/mm/dd"}};var At={today:"Today",selectedDate:"Selected date"},A={dateFormatSpecs:[{format:"mm/dd/yyyy",regex:"(?:0[1-9]|1[0-2])/(?:0[1-9]|[12][0-9]|3[01])/(?:\\d{4})",minLength:10,maxLength:10}],defaultDate:"today",format:"mm/dd/yyyy",format2:"",language:"en",weekStart:0,todayHighlight:!0,daysOfWeekHighlighted:{sun:void 0,mon:void 0,tue:void 0,wed:void 0,thu:void 0,fri:void 0,sat:void 0}},y={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},de=class extends b.PluginSettingTab{constructor(e,i){super(e,i);this._plugin=i}display(){let{containerEl:e}=this;e.empty(),new b.Setting(e).setName("Date format").setDesc("Date format to be inserted.").addText(i=>i.setPlaceholder("mm/dd/yyyy").setValue(this._plugin.settings.dateFormatSpecs[0].format||A.dateFormatSpecs[0].format).onChange(async s=>this._plugin.settings.dateFormatSpecs[0].format=s).inputEl.onblur=async()=>await this.updateDateFormatSpecs()),e.createDiv("setting-date-format-description",i=>{i.createDiv("").setText("ex1) mm/dd/yyyy => 01/23/2024"),i.createDiv("").setText("ex2) DD mm-dd => Tuesday 01-23"),i.createDiv("").setText("ex3) yyyy.mm.dd(D) => 2024.01.23(Tue)"),i.createDiv("format-details").setText("Please check the link below for format details.");let a=i.createEl("a");a.setText("vanillajs-datepicker > Date String & Format"),a.setAttrs({href:"https://mymth.github.io/vanillajs-datepicker/#/date-string+format"})}),new b.Setting(e).setName("Another date format (Optional)").setDesc('Another date format to be inserted. If set, display buttons to select a format at the bottom of the calendar. Buttons can be selected by clicking or by \u201C1" or \u201C2" shortcut keys.').addText(i=>i.setPlaceholder("mm/dd/yyyy").setValue(this._plugin.settings.dateFormatSpecs[1].format||"").onChange(async s=>this._plugin.settings.dateFormatSpecs[1].format=s).inputEl.onblur=async()=>await this.updateDateFormatSpecs()),new b.Setting(e).setName("Default date on calendar open").setDesc("Choose which date is selected when opening the calendar.").addDropdown(i=>i.addOptions(At).setValue(this._plugin.settings.defaultDate||"today").onChange(async s=>{this._plugin.settings.defaultDate=s,await this._plugin.saveSettings()})),new b.Setting(e).setName("Language").setDesc("Set calendar and date-related languages.").addDropdown(i=>i.addOptions(_e).setValue(this._plugin.settings.language).onChange(async s=>{this._plugin.settings.language=s,await this.updateDateFormatSpecs()})),new b.Setting(e).setName("Week start").setDesc("Start day of the week.").addDropdown(i=>i.addOptions({[y.sun]:"Sunday",[y.mon]:"Monday",[y.tue]:"Tuesday",[y.wed]:"Wednesday",[y.thu]:"Thursday",[y.fri]:"Friday",[y.sat]:"Saturday"}).setValue(`${this._plugin.settings.weekStart}`).onChange(async s=>{this._plugin.settings.weekStart=parseInt(s,10)||y.sun,await this._plugin.saveSettings()})),new b.Setting(e).setName("Highlight the today").setDesc("Whether to highlight the today.").addToggle(i=>i.setValue(this._plugin.settings.todayHighlight).onChange(async s=>{this._plugin.settings.todayHighlight=s,await this._plugin.saveData(this._plugin.settings)})),new b.Setting(e).setName("Highlight days of week").setDesc("Days of the week to highlight in the calendar."),e.createDiv("setting-day-of-week",i=>{new b.Setting(i).setDesc("Sunday").addToggle(s=>s.setValue(this._plugin.settings.daysOfWeekHighlighted.sun===y.sun).onChange(async a=>{this._plugin.settings.daysOfWeekHighlighted.sun=a?y.sun:void 0,await this._plugin.saveSettings()})),new b.Setting(i).setDesc("Monday").addToggle(s=>s.setValue(this._plugin.settings.daysOfWeekHighlighted.mon===y.mon).onChange(async a=>{this._plugin.settings.daysOfWeekHighlighted.mon=a?y.mon:void 0,await this._plugin.saveSettings()})),new b.Setting(i).setDesc("Tuesday").addToggle(s=>s.setValue(this._plugin.settings.daysOfWeekHighlighted.tue===y.tue).onChange(async a=>{this._plugin.settings.daysOfWeekHighlighted.tue=a?y.tue:void 0,await this._plugin.saveSettings()})),new b.Setting(i).setDesc("Wednesday").addToggle(s=>s.setValue(this._plugin.settings.daysOfWeekHighlighted.wed===y.wed).onChange(async a=>{this._plugin.settings.daysOfWeekHighlighted.wed=a?y.wed:void 0,await this._plugin.saveSettings()})),new b.Setting(i).setDesc("Thursday").addToggle(s=>s.setValue(this._plugin.settings.daysOfWeekHighlighted.thu===y.thu).onChange(async a=>{this._plugin.settings.daysOfWeekHighlighted.thu=a?y.thu:void 0,await this._plugin.saveSettings()})),new b.Setting(i).setDesc("Friday").addToggle(s=>s.setValue(this._plugin.settings.daysOfWeekHighlighted.fri===y.fri).onChange(async a=>{this._plugin.settings.daysOfWeekHighlighted.fri=a?y.fri:void 0,await this._plugin.saveSettings()})),new b.Setting(i).setDesc("Saturday").addToggle(s=>s.setValue(this._plugin.settings.daysOfWeekHighlighted.sat===y.sat).onChange(async a=>{this._plugin.settings.daysOfWeekHighlighted.sat=a?y.sat:void 0,await this._plugin.saveSettings()}))})}async updateDateFormatSpecs(){this._plugin.settings.dateFormatSpecs[0]=this.generateDateFormatSpec(this._plugin.settings.dateFormatSpecs[0].format),this._plugin.settings.dateFormatSpecs[1]=this.generateDateFormatSpec(this._plugin.settings.dateFormatSpecs[1].format),await this._plugin.saveSettings()}generateDateFormatSpec(e){let i=this.generateTokens(e),{regex:s,min:a,max:r}=this.generateRegex(e,i);return{format:e,regex:s,minLength:a,maxLength:r}}generateTokens(e,i=[]){let a=[["yyyy","yy","y"],["mm","m"],["MM","M"],["dd","d"],["DD","D"]].reduce((r,o)=>{let c=this.findFirstToken(e,o);return c&&c.index<r.index?c:r},{format:"",index:1/0});if(a.format){let r=e.slice(a.index+a.format.length);return this.generateTokens(r,[...i,a.format])}return i}generateRegex(e,i,s={regex:"",min:0,max:0}){let a=this.findFirstToken(e,i);if(a){let{regex:r,min:o,max:c}=this.formatToRegexPattern(a.format),d=e.slice(0,a.index),l={...s},u=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return l.regex+=u+r,l.min+=d.length+o,l.max+=d.length+c,i.shift(),this.generateRegex(e.slice(a.index+a.format.length),i,l)}else{let r={...s},o=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return r.regex+=o,r.min+=e.length,r.max+=e.length,r}}formatToRegexPattern(e){switch(e){case"dd":return{regex:"(?:0[1-9]|[12][0-9]|3[01])",min:2,max:2};case"d":return{regex:"(?:[1-9]|[12][0-9]|3[01])",min:1,max:2};case"DD":{let i=P[this._plugin.settings.language].days,s=`(?:${i.join("|")})`,a=Math.min(...i.map(o=>o.length)),r=Math.max(...i.map(o=>o.length));return{regex:s,min:a,max:r}}case"D":{let i=P[this._plugin.settings.language].daysShort,s=`(?:${i.join("|")})`,a=Math.min(...i.map(o=>o.length)),r=Math.max(...i.map(o=>o.length));return{regex:s,min:a,max:r}}case"mm":return{regex:"(?:0[1-9]|1[0-2])",min:2,max:2};case"m":return{regex:"(?:[1-9]|1[0-2])",min:1,max:2};case"MM":{let i=P[this._plugin.settings.language].months,s=`(?:${i.join("|")})`,a=Math.min(...i.map(o=>o.length)),r=Math.max(...i.map(o=>o.length));return{regex:s,min:a,max:r}}case"M":{let i=P[this._plugin.settings.language].monthsShort,s=`(?:${i.join("|")})`,a=Math.min(...i.map(o=>o.length)),r=Math.max(...i.map(o=>o.length));return{regex:s,min:a,max:r}}case"yyyy":return{regex:"(?:\\d{4})",min:4,max:4};case"yy":return{regex:"(?:\\d{2})",min:2,max:2};case"y":return{regex:"(?:\\d+)",min:1,max:4};default:return{regex:"",min:0,max:0}}}findFirstToken(e,i){let s=-1,a=null;for(let r of i){let o=e.indexOf(r);if(o>=0){s=o,a=r;break}}return a?{format:a,index:s}:null}};var xe=require("obsidian");function U(n){return n[n.length-1]}function V(n,...t){return t.forEach(e=>{n.includes(e)||n.push(e)}),n}function Me(n,t){return n?n.split(t):[]}function G(n,t,e){let i=t===void 0||n>=t,s=e===void 0||n<=e;return i&&s}function ce(n,t,e){return n<t?t:n>e?e:n}function C(n,t,e={},i=0,s=""){let a=Object.keys(e).reduce((o,c)=>{let d=e[c];return typeof d=="function"&&(d=d(i)),`${o} ${c}="${d}"`},n);s+=`<${a}></${n}>`;let r=i+1;return r<t?C(n,t,e,r,s):s}function q(n){return n.replace(/>\s+/g,">").replace(/\s+</,"<")}function le(n){return new Date(n).setHours(0,0,0,0)}function F(){return new Date().setHours(0,0,0,0)}function E(...n){switch(n.length){case 0:return F();case 1:return le(n[0])}let t=new Date(0);return t.setFullYear(...n),t.setHours(0,0,0,0)}function I(n,t){let e=new Date(n);return e.setDate(e.getDate()+t)}function Be(n,t){return I(n,t*7)}function j(n,t){let e=new Date(n),i=e.getMonth()+t,s=i%12;s<0&&(s+=12);let a=e.setMonth(i);return e.getMonth()!==s?e.setDate(0):a}function H(n,t){let e=new Date(n),i=e.getMonth(),s=e.setFullYear(e.getFullYear()+t);return i===1&&e.getMonth()===2?e.setDate(0):s}function We(n,t){return(n-t+7)%7}function B(n,t,e=0){let i=new Date(n).getDay();return I(n,We(t,e)-We(i,e))}function He(n,t){return Math.round((n-t)/6048e5)+1}function Re(n){let t=B(n,4,1),e=B(new Date(t).setMonth(0,4),4,1);return He(t,e)}function Ye(n,t){let e=B(new Date(n).setMonth(0,1),t,t),i=B(n,t,t),s=He(i,e);if(s<53)return s;let a=B(new Date(n).setDate(32),t,t);return i===a?1:s}function Pe(n){return Ye(n,0)}function Ie(n){return Ye(n,6)}function K(n,t){let e=new Date(n).getFullYear();return Math.floor(e/t)*t}function M(n,t,e){if(t!==1&&t!==2)return n;let i=new Date(n);return t===1?e?i.setMonth(i.getMonth()+1,0):i.setDate(1):e?i.setFullYear(i.getFullYear()+1,0,0):i.setMonth(0,1),i.setHours(0,0,0,0)}var ue=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,Vt=/[\s!-/:-@[-`{-~年月日]+/,Oe={},je={y(n,t){return new Date(n).setFullYear(parseInt(t,10))},m(n,t,e){let i=new Date(n),s=parseInt(t,10)-1;if(isNaN(s)){if(!t)return NaN;let a=t.toLowerCase(),r=o=>o.toLowerCase().startsWith(a);if(s=e.monthsShort.findIndex(r),s<0&&(s=e.months.findIndex(r)),s<0)return NaN}return i.setMonth(s),i.getMonth()!==Ke(s)?i.setDate(0):i.getTime()},d(n,t){return new Date(n).setDate(parseInt(t,10))}},_t={d(n){return n.getDate()},dd(n){return he(n.getDate(),2)},D(n,t){return t.daysShort[n.getDay()]},DD(n,t){return t.days[n.getDay()]},m(n){return n.getMonth()+1},mm(n){return he(n.getMonth()+1,2)},M(n,t){return t.monthsShort[n.getMonth()]},MM(n,t){return t.months[n.getMonth()]},y(n){return n.getFullYear()},yy(n){return he(n.getFullYear(),2).slice(-2)},yyyy(n){return he(n.getFullYear(),4)}};function Ke(n){return n>-1?n%12:Ke(n+12)}function he(n,t){return n.toString().padStart(t,"0")}function $e(n){if(typeof n!="string")throw new Error("Invalid date format.");if(n in Oe)return Oe[n];let t=n.split(ue),e=n.match(new RegExp(ue,"g"));if(t.length===0||!e)throw new Error("Invalid date format.");let i=e.map(a=>_t[a]),s=Object.keys(je).reduce((a,r)=>(e.find(c=>c[0]!=="D"&&c[0].toLowerCase()===r)&&a.push(r),a),[]);return Oe[n]={parser(a,r){let o=a.split(Vt).reduce((c,d,l)=>{if(d.length>0&&e[l]){let u=e[l][0];u==="M"?c.m=d:u!=="D"&&(c[u]=d)}return c},{});return s.reduce((c,d)=>{let l=je[d](c,o[d],r);return isNaN(l)?c:l},F())},formatter(a,r){let o=i.reduce((c,d,l)=>c+=`${t[l]}${d(a,r)}`,"");return o+=U(t)}}}function _(n,t,e){if(n instanceof Date||typeof n=="number"){let i=le(n);return isNaN(i)?void 0:i}if(n){if(n==="today")return F();if(t&&t.toValue){let i=t.toValue(n,t,e);return isNaN(i)?void 0:le(i)}return $e(t).parser(n,e)}}function $(n,t,e){if(isNaN(n)||!n&&n!==0)return"";let i=typeof n=="number"?new Date(n):n;return t.toDisplay?t.toDisplay(i,t,e):$e(t).formatter(i,e)}var Wt=document.createRange();function x(n){return Wt.createContextualFragment(n)}function Te(n){return n.parentElement||(n.parentNode instanceof ShadowRoot?n.parentNode.host:void 0)}function R(n){return n.getRootNode().activeElement===n}function z(n){n.style.display!=="none"&&(n.style.display&&(n.dataset.styleDisplay=n.style.display),n.style.display="none")}function J(n){n.style.display==="none"&&(n.dataset.styleDisplay?(n.style.display=n.dataset.styleDisplay,delete n.dataset.styleDisplay):n.style.display="")}function te(n){n.firstChild&&(n.removeChild(n.firstChild),te(n))}function ze(n,t){te(n),t instanceof DocumentFragment?n.appendChild(t):typeof t=="string"?n.appendChild(x(t)):typeof t.forEach=="function"&&t.forEach(e=>{n.appendChild(e)})}var fe=new WeakMap,{addEventListener:Bt,removeEventListener:Ht}=EventTarget.prototype;function X(n,t){let e=fe.get(n);e||(e=[],fe.set(n,e)),t.forEach(i=>{Bt.call(...i),e.push(i)})}function Fe(n){let t=fe.get(n);t&&(t.forEach(e=>{Ht.call(...e)}),fe.delete(n))}if(!Event.prototype.composedPath){let n=(t,e=[])=>{e.push(t);let i;return t.parentNode?i=t.parentNode:t.host?i=t.host:t.defaultView&&(i=t.defaultView),i?n(i,e):e};Event.prototype.composedPath=function(){return n(this.target)}}function Je(n,t,e){let[i,...s]=n;if(t(i))return i;if(!(i===e||i.tagName==="HTML"||s.length===0))return Je(s,t,e)}function me(n,t){let e=typeof t=="function"?t:i=>i instanceof Element&&i.matches(t);return Je(n.composedPath(),e,n.currentTarget)}var Z={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}};var ie={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,clearButton:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,enableOnReadonly:!0,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"\xBB",orientation:"auto",pickLevel:0,prevArrow:"\xAB",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayButton:!1,todayButtonMode:0,todayHighlight:!1,updateOnBlur:!0,weekNumbers:0,weekStart:0};var{language:Ce,format:Rt,weekStart:Yt}=ie;function Ue(n,t){return n.length<6&&t>=0&&t<7?V(n,t):n}function Xe(n,t){switch(n===4?t===6?3:!t+1:n){case 1:return Re;case 2:return Pe;case 3:return Ie}}function Ge(n,t,e){return t.weekStart=n,t.weekEnd=(n+6)%7,e===4&&(t.getWeekNumber=Xe(4,n)),n}function qe(n,t,e,i){let s=_(n,t,e);return s!==void 0?s:i}function Ee(n,t,e=3){let i=parseInt(n,10);return i>=0&&i<=e?i:t}function ge(n,t,e,i=void 0){t in n&&(e in n||(n[e]=i?i(n[t]):n[t]),delete n[t])}function ne(n,t){let e=Object.assign({},n),i={},s=t.constructor.locales,a=!!t.rangeSideIndex,{datesDisabled:r,format:o,language:c,locale:d,maxDate:l,maxView:u,minDate:O,pickLevel:m,startView:w,weekNumbers:f,weekStart:D}=t.config||{};if(ge(e,"calendarWeeks","weekNumbers",h=>h?1:0),ge(e,"clearBtn","clearButton"),ge(e,"todayBtn","todayButton"),ge(e,"todayBtnMode","todayButtonMode"),e.language){let h;if(e.language!==c&&(s[e.language]?h=e.language:(h=e.language.split("-")[0],s[h]||(h=!1))),delete e.language,h){c=i.language=h;let g=d||s[Ce];d=Object.assign({format:Rt,weekStart:Yt},s[Ce]),c!==Ce&&Object.assign(d,s[c]),i.locale=d,o===g.format&&(o=i.format=d.format),D===g.weekStart&&(D=Ge(d.weekStart,i,f))}}if(e.format){let h=typeof e.format.toDisplay=="function",g=typeof e.format.toValue=="function",p=ue.test(e.format);(h&&g||p)&&(o=i.format=e.format),delete e.format}let S=m;"pickLevel"in e&&(S=Ee(e.pickLevel,m,2),delete e.pickLevel),S!==m&&(S>m&&("minDate"in e||(e.minDate=O),"maxDate"in e||(e.maxDate=l)),r&&!e.datesDisabled&&(e.datesDisabled=[]),m=i.pickLevel=S);let T=O,k=l;if("minDate"in e){let h=E(0,0,1);T=e.minDate===null?h:qe(e.minDate,o,d,T),T!==h&&(T=M(T,m,!1)),delete e.minDate}if("maxDate"in e&&(k=e.maxDate===null?void 0:qe(e.maxDate,o,d,k),k!==void 0&&(k=M(k,m,!0)),delete e.maxDate),k<T?(O=i.minDate=k,l=i.maxDate=T):(O!==T&&(O=i.minDate=T),l!==k&&(l=i.maxDate=k)),e.datesDisabled){let h=e.datesDisabled;if(typeof h=="function")i.datesDisabled=null,i.checkDisabled=(g,p)=>h(new Date(g),p,a);else{let g=i.datesDisabled=h.reduce((p,ve)=>{let Ve=_(ve,o,d);return Ve!==void 0?V(p,M(Ve,m,a)):p},[]);i.checkDisabled=p=>g.includes(p)}delete e.datesDisabled}if("defaultViewDate"in e){let h=_(e.defaultViewDate,o,d);h!==void 0&&(i.defaultViewDate=h),delete e.defaultViewDate}if("weekStart"in e){let h=Number(e.weekStart)%7;isNaN(h)||(D=Ge(h,i,f)),delete e.weekStart}if(e.daysOfWeekDisabled&&(i.daysOfWeekDisabled=e.daysOfWeekDisabled.reduce(Ue,[]),delete e.daysOfWeekDisabled),e.daysOfWeekHighlighted&&(i.daysOfWeekHighlighted=e.daysOfWeekHighlighted.reduce(Ue,[]),delete e.daysOfWeekHighlighted),"weekNumbers"in e){let h=e.weekNumbers;if(h){let g=typeof h=="function"?(p,ve)=>h(new Date(p),ve):Xe(h=parseInt(h,10),D);g&&(f=i.weekNumbers=h,i.getWeekNumber=g)}else f=i.weekNumbers=0,i.getWeekNumber=null;delete e.weekNumbers}if("maxNumberOfDates"in e){let h=parseInt(e.maxNumberOfDates,10);h>=0&&(i.maxNumberOfDates=h,i.multidate=h!==1),delete e.maxNumberOfDates}e.dateDelimiter&&(i.dateDelimiter=String(e.dateDelimiter),delete e.dateDelimiter);let L=u;"maxView"in e&&(L=Ee(e.maxView,u),delete e.maxView),L=m>L?m:L,L!==u&&(u=i.maxView=L);let v=w;if("startView"in e&&(v=Ee(e.startView,v),delete e.startView),v<m?v=m:v>u&&(v=u),v!==w&&(i.startView=v),e.prevArrow){let h=x(e.prevArrow);h.childNodes.length>0&&(i.prevArrow=h.childNodes),delete e.prevArrow}if(e.nextArrow){let h=x(e.nextArrow);h.childNodes.length>0&&(i.nextArrow=h.childNodes),delete e.nextArrow}if("disableTouchKeyboard"in e&&(i.disableTouchKeyboard="ontouchstart"in document&&!!e.disableTouchKeyboard,delete e.disableTouchKeyboard),e.orientation){let h=e.orientation.toLowerCase().split(/\s+/g);i.orientation={x:h.find(g=>g==="left"||g==="right")||"auto",y:h.find(g=>g==="top"||g==="bottom")||"auto"},delete e.orientation}if("todayButtonMode"in e){switch(e.todayButtonMode){case 0:case 1:i.todayButtonMode=e.todayButtonMode}delete e.todayButtonMode}return Object.entries(e).forEach(([h,g])=>{g!==void 0&&h in ie&&(i[h]=g)}),i}var Ze={show:{key:"ArrowDown"},hide:null,toggle:{key:"Escape"},prevButton:{key:"ArrowLeft",ctrlOrMetaKey:!0},nextButton:{key:"ArrowRight",ctrlOrMetaKey:!0},viewSwitch:{key:"ArrowUp",ctrlOrMetaKey:!0},clearButton:{key:"Backspace",ctrlOrMetaKey:!0},todayButton:{key:".",ctrlOrMetaKey:!0},exitEditMode:{key:"ArrowDown",ctrlOrMetaKey:!0}};function Ne(n){return Object.keys(Ze).reduce((t,e)=>{let i=n[e]===void 0?Ze[e]:n[e],s=i&&i.key;if(!s||typeof s!="string")return t;let a={key:s,ctrlOrMetaKey:!!(i.ctrlOrMetaKey||i.ctrlKey||i.metaKey)};return s.length>1&&(a.altKey=!!i.altKey,a.shiftKey=!!i.shiftKey),t[e]=a,t},{})}var Qe=n=>n.map(t=>`<button type="button" class="%buttonClass% ${t}" tabindex="-1"></button>`).join(""),et=q(`<div class="datepicker">
  <div class="datepicker-picker">
    <div class="datepicker-header">
      <div class="datepicker-title"></div>
      <div class="datepicker-controls">
        ${Qe(["prev-button prev-btn","view-switch","next-button next-btn"])}
      </div>
    </div>
    <div class="datepicker-main"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls">
        ${Qe(["today-button today-btn","clear-button clear-btn"])}
      </div>
    </div>
  </div>
</div>`);var tt=q(`<div class="days">
  <div class="days-of-week">${C("span",7,{class:"dow"})}</div>
  <div class="datepicker-grid">${C("span",42)}</div>
</div>`);var it=q(`<div class="week-numbers calendar-weeks">
  <div class="days-of-week"><span class="dow"></span></div>
  <div class="weeks">${C("span",6,{class:"week"})}</div>
</div>`);var W=class{constructor(t,e){Object.assign(this,e,{picker:t,element:x('<div class="datepicker-view"></div>').firstChild,selected:[],isRangeEnd:!!t.datepicker.rangeSideIndex}),this.init(this.picker.datepicker.config)}init(t){"pickLevel"in t&&(this.isMinView=this.id===t.pickLevel),this.setOptions(t),this.updateFocus(),this.updateSelection()}prepareForRender(t,e,i){this.disabled=[];let s=this.picker;s.setViewSwitchLabel(t),s.setPrevButtonDisabled(e),s.setNextButtonDisabled(i)}setDisabled(t,e){e.add("disabled"),V(this.disabled,t)}performBeforeHook(t,e){let i=this.beforeShow(new Date(e));switch(typeof i){case"boolean":i={enabled:i};break;case"string":i={classes:i}}if(i){let s=t.classList;if(i.enabled===!1&&this.setDisabled(e,s),i.classes){let a=i.classes.split(/\s+/);s.add(...a),a.includes("disabled")&&this.setDisabled(e,s)}i.content&&ze(t,i.content)}}renderCell(t,e,i,s,{selected:a,range:r},o,c=[]){t.textContent=e,this.isMinView&&(t.dataset.date=s);let d=t.classList;if(t.className=`datepicker-cell ${this.cellClass}`,i<this.first?d.add("prev"):i>this.last&&d.add("next"),d.add(...c),(o||this.checkDisabled(s,this.id))&&this.setDisabled(s,d),r){let[l,u]=r;i>l&&i<u&&d.add("range"),i===l&&d.add("range-start"),i===u&&d.add("range-end")}a.includes(i)&&d.add("selected"),i===this.focused&&d.add("focused"),this.beforeShow&&this.performBeforeHook(t,s)}refreshCell(t,e,i,[s,a]){let r=t.classList;r.remove("range","range-start","range-end","selected","focused"),e>s&&e<a&&r.add("range"),e===s&&r.add("range-start"),e===a&&r.add("range-end"),i.includes(e)&&r.add("selected"),e===this.focused&&r.add("focused")}changeFocusedCell(t){this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[t].classList.add("focused")}};var se=class extends W{constructor(t){super(t,{id:0,name:"days",cellClass:"day"})}init(t,e=!0){if(e){let i=x(tt).firstChild;this.dow=i.firstChild,this.grid=i.lastChild,this.element.appendChild(i)}super.init(t)}setOptions(t){let e;if("minDate"in t&&(this.minDate=t.minDate),"maxDate"in t&&(this.maxDate=t.maxDate),t.checkDisabled&&(this.checkDisabled=t.checkDisabled),t.daysOfWeekDisabled&&(this.daysOfWeekDisabled=t.daysOfWeekDisabled,e=!0),t.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=t.daysOfWeekHighlighted),"todayHighlight"in t&&(this.todayHighlight=t.todayHighlight),"weekStart"in t&&(this.weekStart=t.weekStart,this.weekEnd=t.weekEnd,e=!0),t.locale){let i=this.locale=t.locale;this.dayNames=i.daysMin,this.switchLabelFormat=i.titleFormat,e=!0}if("beforeShowDay"in t&&(this.beforeShow=typeof t.beforeShowDay=="function"?t.beforeShowDay:void 0),"weekNumbers"in t)if(t.weekNumbers&&!this.weekNumbers){let i=x(it).firstChild;this.weekNumbers={element:i,dow:i.firstChild,weeks:i.lastChild},this.element.insertBefore(i,this.element.firstChild)}else this.weekNumbers&&!t.weekNumbers&&(this.element.removeChild(this.weekNumbers.element),this.weekNumbers=null);"getWeekNumber"in t&&(this.getWeekNumber=t.getWeekNumber),"showDaysOfWeek"in t&&(t.showDaysOfWeek?(J(this.dow),this.weekNumbers&&J(this.weekNumbers.dow)):(z(this.dow),this.weekNumbers&&z(this.weekNumbers.dow))),e&&Array.from(this.dow.children).forEach((i,s)=>{let a=(this.weekStart+s)%7;i.textContent=this.dayNames[a],i.className=this.daysOfWeekDisabled.includes(a)?"dow disabled":"dow"})}updateFocus(){let t=new Date(this.picker.viewDate),e=t.getFullYear(),i=t.getMonth(),s=E(e,i,1),a=B(s,this.weekStart,this.weekStart);this.first=s,this.last=E(e,i+1,0),this.start=a,this.focused=this.picker.viewDate}updateSelection(){let{dates:t,rangepicker:e}=this.picker.datepicker;this.selected=t,e&&(this.range=e.dates)}render(){if(this.today=this.todayHighlight?F():void 0,this.prepareForRender($(this.focused,this.switchLabelFormat,this.locale),this.first<=this.minDate,this.last>=this.maxDate),this.weekNumbers){let t=this.weekStart,e=B(this.first,t,t);Array.from(this.weekNumbers.weeks.children).forEach((i,s)=>{let a=Be(e,s);i.textContent=this.getWeekNumber(a,t),s>3&&i.classList[a>this.last?"add":"remove"]("next")})}Array.from(this.grid.children).forEach((t,e)=>{let i=I(this.start,e),s=new Date(i),a=s.getDay(),r=[];this.today===i&&r.push("today"),this.daysOfWeekHighlighted.includes(a)&&r.push("highlighted"),this.renderCell(t,s.getDate(),i,i,this,i<this.minDate||i>this.maxDate||this.daysOfWeekDisabled.includes(a),r)})}refresh(){let t=this.range||[];Array.from(this.grid.children).forEach(e=>{this.refreshCell(e,Number(e.dataset.date),this.selected,t)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/864e5))}};function nt(n,t){if(!n||!n[0]||!n[1])return;let[[e,i],[s,a]]=n;if(!(e>t||s<t))return[e===t?i:-1,s===t?a:12]}var ae=class extends W{constructor(t){super(t,{id:1,name:"months",cellClass:"month"})}init(t,e=!0){e&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(x(C("span",12,{"data-month":i=>i}))),this.first=0,this.last=11),super.init(t)}setOptions(t){if(t.locale&&(this.monthNames=t.locale.monthsShort),"minDate"in t)if(t.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{let e=new Date(t.minDate);this.minYear=e.getFullYear(),this.minMonth=e.getMonth(),this.minDate=e.setDate(1)}if("maxDate"in t)if(t.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{let e=new Date(t.maxDate);this.maxYear=e.getFullYear(),this.maxMonth=e.getMonth(),this.maxDate=E(this.maxYear,this.maxMonth+1,0)}t.checkDisabled&&(this.checkDisabled=this.isMinView||t.datesDisabled===null?t.checkDisabled:()=>!1),"beforeShowMonth"in t&&(this.beforeShow=typeof t.beforeShowMonth=="function"?t.beforeShowMonth:void 0)}updateFocus(){let t=new Date(this.picker.viewDate);this.year=t.getFullYear(),this.focused=t.getMonth()}updateSelection(){let{dates:t,rangepicker:e}=this.picker.datepicker;this.selected=t.reduce((i,s)=>{let a=new Date(s),r=a.getFullYear(),o=a.getMonth();return i[r]===void 0?i[r]=[o]:V(i[r],o),i},{}),e&&e.dates&&(this.range=e.dates.map(i=>{let s=new Date(i);return isNaN(s)?void 0:[s.getFullYear(),s.getMonth()]}))}render(){this.prepareForRender(this.year,this.year<=this.minYear,this.year>=this.maxYear);let t=this.selected[this.year]||[],e=this.year<this.minYear||this.year>this.maxYear,i=this.year===this.minYear,s=this.year===this.maxYear,a=nt(this.range,this.year);Array.from(this.grid.children).forEach((r,o)=>{let c=M(new Date(this.year,o,1),1,this.isRangeEnd);this.renderCell(r,this.monthNames[o],o,c,{selected:t,range:a},e||i&&o<this.minMonth||s&&o>this.maxMonth)})}refresh(){let t=this.selected[this.year]||[],e=nt(this.range,this.year)||[];Array.from(this.grid.children).forEach((i,s)=>{this.refreshCell(i,s,t,e)})}refreshFocus(){this.changeFocusedCell(this.focused)}};function Pt(n){return[...n].reduce((t,e,i)=>t+=i?e:e.toUpperCase(),"")}var Q=class extends W{constructor(t,e){super(t,e)}init(t,e=!0){e&&(this.navStep=this.step*10,this.beforeShowOption=`beforeShow${Pt(this.cellClass)}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(x(C("span",12)))),super.init(t)}setOptions(t){if("minDate"in t&&(t.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=K(t.minDate,this.step),this.minDate=E(this.minYear,0,1))),"maxDate"in t&&(t.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=K(t.maxDate,this.step),this.maxDate=E(this.maxYear,11,31))),t.checkDisabled&&(this.checkDisabled=this.isMinView||t.datesDisabled===null?t.checkDisabled:()=>!1),this.beforeShowOption in t){let e=t[this.beforeShowOption];this.beforeShow=typeof e=="function"?e:void 0}}updateFocus(){let t=new Date(this.picker.viewDate),e=K(t,this.navStep),i=e+9*this.step;this.first=e,this.last=i,this.start=e-this.step,this.focused=K(t,this.step)}updateSelection(){let{dates:t,rangepicker:e}=this.picker.datepicker;this.selected=t.reduce((i,s)=>V(i,K(s,this.step)),[]),e&&e.dates&&(this.range=e.dates.map(i=>{if(i!==void 0)return K(i,this.step)}))}render(){this.prepareForRender(`${this.first}-${this.last}`,this.first<=this.minYear,this.last>=this.maxYear),Array.from(this.grid.children).forEach((t,e)=>{let i=this.start+e*this.step,s=M(new Date(i,0,1),2,this.isRangeEnd);t.dataset.year=i,this.renderCell(t,i,i,s,this,i<this.minYear||i>this.maxYear)})}refresh(){let t=this.range||[];Array.from(this.grid.children).forEach(e=>{this.refreshCell(e,Number(e.textContent),this.selected,t)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/this.step))}};function Y(n,t){let e={bubbles:!0,cancelable:!0,detail:{date:n.getDate(),viewDate:new Date(n.picker.viewDate),viewId:n.picker.currentView.id,datepicker:n}};n.element.dispatchEvent(new CustomEvent(t,e))}function ee(n,t){let{config:e,picker:i}=n,{currentView:s,viewDate:a}=i,r;switch(s.id){case 0:r=j(a,t);break;case 1:r=H(a,t);break;default:r=H(a,t*s.navStep)}r=ce(r,e.minDate,e.maxDate),i.changeFocus(r).render()}function pe(n){let t=n.picker.currentView.id;t!==n.config.maxView&&n.picker.changeView(t+1).render()}function ye(n){n.setDate({clear:!0})}function we(n){let t=F();n.config.todayButtonMode===1?n.setDate(t,{forceRefresh:!0,viewDate:t}):n.setFocusedDate(t,!0)}function De(n){let t=()=>{n.config.updateOnBlur?n.update({revert:!0}):n.refresh("input"),n.hide()},e=n.element;R(e)?e.addEventListener("blur",t,{once:!0}):t()}function st(n,t){let e=n.picker,i=new Date(e.viewDate),s=e.currentView.id,a=s===1?j(i,t-i.getMonth()):H(i,t-i.getFullYear());e.changeFocus(a).changeView(s-1).render()}function at(n){pe(n)}function rt(n){ee(n,-1)}function ot(n){ee(n,1)}function dt(n,t){let e=me(t,".datepicker-cell");if(!e||e.classList.contains("disabled"))return;let{id:i,isMinView:s}=n.picker.currentView,a=e.dataset;s?n.setDate(Number(a.date)):i===1?st(n,Number(a.month)):st(n,Number(a.year))}function ct(n){n.preventDefault()}var Le=["left","top","right","bottom"].reduce((n,t)=>(n[t]=`datepicker-orient-${t}`,n),{}),lt=n=>n&&`${n}px`;function ht(n,t){if("title"in t&&(t.title?(n.controls.title.textContent=t.title,J(n.controls.title)):(n.controls.title.textContent="",z(n.controls.title))),t.prevArrow){let e=n.controls.prevButton;te(e),t.prevArrow.forEach(i=>{e.appendChild(i.cloneNode(!0))})}if(t.nextArrow){let e=n.controls.nextButton;te(e),t.nextArrow.forEach(i=>{e.appendChild(i.cloneNode(!0))})}if(t.locale&&(n.controls.todayButton.textContent=t.locale.today,n.controls.clearButton.textContent=t.locale.clear),"todayButton"in t&&(t.todayButton?J(n.controls.todayButton):z(n.controls.todayButton)),"minDate"in t||"maxDate"in t){let{minDate:e,maxDate:i}=n.datepicker.config;n.controls.todayButton.disabled=!G(F(),e,i)}"clearButton"in t&&(t.clearButton?J(n.controls.clearButton):z(n.controls.clearButton))}function ut(n){let{dates:t,config:e,rangeSideIndex:i}=n,s=t.length>0?U(t):M(e.defaultViewDate,e.pickLevel,i);return ce(s,e.minDate,e.maxDate)}function ft(n,t){!("_oldViewDate"in n)&&t!==n.viewDate&&(n._oldViewDate=n.viewDate),n.viewDate=t;let{id:e,year:i,first:s,last:a}=n.currentView,r=new Date(t).getFullYear();switch(e){case 0:return t<s||t>a;case 1:return r!==i;default:return r<s||r>a}}function Ae(n){return window.getComputedStyle(n).direction}function mt(n){let t=Te(n);if(!(t===document.body||!t))return window.getComputedStyle(t).overflow!=="visible"?t:mt(t)}var re=class{constructor(t){let{config:e,inputField:i}=this.datepicker=t,s=et.replace(/%buttonClass%/g,e.buttonClass),a=this.element=x(s).firstChild,[r,o,c]=a.firstChild.children,d=r.firstElementChild,[l,u,O]=r.lastElementChild.children,[m,w]=c.firstChild.children,f={title:d,prevButton:l,viewSwitch:u,nextButton:O,todayButton:m,clearButton:w};this.main=o,this.controls=f;let D=i?"dropdown":"inline";a.classList.add(`datepicker-${D}`),ht(this,e),this.viewDate=ut(t),X(t,[[a,"mousedown",ct],[o,"click",dt.bind(null,t)],[f.viewSwitch,"click",at.bind(null,t)],[f.prevButton,"click",rt.bind(null,t)],[f.nextButton,"click",ot.bind(null,t)],[f.todayButton,"click",we.bind(null,t)],[f.clearButton,"click",ye.bind(null,t)]]),this.views=[new se(this),new ae(this),new Q(this,{id:2,name:"years",cellClass:"year",step:1}),new Q(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[e.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),e.container?e.container.appendChild(this.element):i.after(this.element)}setOptions(t){ht(this,t),this.views.forEach(e=>{e.init(t,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){if(this.active)return;let{datepicker:t,element:e}=this,i=t.inputField;if(i){let s=Ae(i);s!==Ae(Te(e))?e.dir=s:e.dir&&e.removeAttribute("dir"),this.place(),e.classList.add("active"),t.config.disableTouchKeyboard&&i.blur()}else e.classList.add("active");this.active=!0,Y(t,"show")}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,Y(this.datepicker,"hide"))}place(){let{classList:t,style:e}=this.element;e.display="block";let{width:i,height:s}=this.element.getBoundingClientRect(),a=this.element.offsetParent;e.display="";let{config:r,inputField:o}=this.datepicker,{left:c,top:d,right:l,bottom:u,width:O,height:m}=o.getBoundingClientRect(),{x:w,y:f}=r.orientation,D=c,S=d;if(a===document.body||!a)D+=window.scrollX,S+=window.scrollY;else{let p=a.getBoundingClientRect();D-=p.left-a.scrollLeft,S-=p.top-a.scrollTop}let T=mt(o),k=0,L=0,{clientWidth:v,clientHeight:h}=document.documentElement;if(T){let p=T.getBoundingClientRect();p.top>0&&(L=p.top),p.left>0&&(k=p.left),p.right<v&&(v=p.right),p.bottom<h&&(h=p.bottom)}let g=0;w==="auto"&&(c<k?(w="left",g=k-c):c+i>v?(w="right",v<l&&(g=v-l)):Ae(o)==="rtl"?w=l-i<k?"left":"right":w="left"),w==="right"&&(D+=O-i),D+=g,f==="auto"&&(d-s>L?f=u+s>h?"top":"bottom":f="bottom"),f==="top"?S-=s:S+=m,t.remove(...Object.values(Le)),t.add(Le[w],Le[f]),e.left=lt(D),e.top=lt(S)}setViewSwitchLabel(t){this.controls.viewSwitch.textContent=t}setPrevButtonDisabled(t){this.controls.prevButton.disabled=t}setNextButtonDisabled(t){this.controls.nextButton.disabled=t}changeView(t){let e=this.currentView;return t!==e.id&&(this._oldView||(this._oldView=e),this.currentView=this.views[t],this._renderMethod="render"),this}changeFocus(t){return this._renderMethod=ft(this,t)?"render":"refreshFocus",this.views.forEach(e=>{e.updateFocus()}),this}update(t=void 0){let e=t===void 0?ut(this.datepicker):t;return this._renderMethod=ft(this,e)?"render":"refresh",this.views.forEach(i=>{i.updateFocus(),i.updateSelection()}),this}render(t=!0){let{currentView:e,datepicker:i,_oldView:s}=this,a=new Date(this._oldViewDate),r=t&&this._renderMethod||"render";if(delete this._oldView,delete this._oldViewDate,delete this._renderMethod,e[r](),s&&(this.main.replaceChild(e.element,s.element),Y(i,"changeView")),!isNaN(a)){let o=new Date(this.viewDate);o.getFullYear()!==a.getFullYear()&&Y(i,"changeYear"),o.getMonth()!==a.getMonth()&&Y(i,"changeMonth")}}};function gt(n,t,e,i,s,a){if(G(n,s,a)){if(i(n)){let r=t(n,e);return gt(r,t,e,i,s,a)}return n}}function It(n,t,e){let i=n.picker,s=i.currentView,a=s.step||1,r=i.viewDate,o;switch(s.id){case 0:r=I(r,e?t*7:t),o=I;break;case 1:r=j(r,e?t*4:t),o=j;break;default:r=H(r,t*(e?4:1)*a),o=H}r=gt(r,o,t<0?-a:a,c=>s.disabled.includes(c),s.minDate,s.maxDate),r!==void 0&&i.changeFocus(r).render()}function pt(n,t){let{config:e,picker:i,editMode:s}=n,a=i.active,{key:r,altKey:o,shiftKey:c}=t,d=t.ctrlKey||t.metaKey,l=()=>{t.preventDefault(),t.stopPropagation()};if(r==="Tab"){De(n);return}if(r==="Enter"){if(!a)n.update();else if(s)n.exitEditMode({update:!0,autohide:e.autohide});else{let f=i.currentView;f.isMinView?n.setDate(i.viewDate):(i.changeView(f.id-1).render(),l())}return}let u=e.shortcutKeys,O={key:r,ctrlOrMetaKey:d,altKey:o,shiftKey:c},m=Object.keys(u).find(f=>{let D=u[f];return!Object.keys(D).find(S=>D[S]!==O[S])});if(m){let f;if(m==="toggle"?f=m:s?m==="exitEditMode"&&(f=m):a?m==="hide"?f=m:m==="prevButton"?f=[ee,[n,-1]]:m==="nextButton"?f=[ee,[n,1]]:m==="viewSwitch"?f=[pe,[n]]:e.clearButton&&m==="clearButton"?f=[ye,[n]]:e.todayButton&&m==="todayButton"&&(f=[we,[n]]):m==="show"&&(f=m),f){Array.isArray(f)?f[0].apply(null,f[1]):n[f](),l();return}}if(!a||s)return;let w=(f,D)=>{c||d||o?n.enterEditMode():(It(n,f,D),t.preventDefault())};r==="ArrowLeft"?w(-1,!1):r==="ArrowRight"?w(1,!1):r==="ArrowUp"?w(-1,!0):r==="ArrowDown"?w(1,!0):(r==="Backspace"||r==="Delete"||r&&r.length===1&&!d)&&n.enterEditMode()}function yt(n){n.config.showOnFocus&&!n._showing&&n.show()}function wt(n,t){let e=t.target;(n.picker.active||n.config.showOnClick)&&(e._active=R(e),e._clicking=setTimeout(()=>{delete e._active,delete e._clicking},2e3))}function Dt(n,t){let e=t.target;e._clicking&&(clearTimeout(e._clicking),delete e._clicking,e._active&&n.enterEditMode(),delete e._active,n.config.showOnClick&&n.show())}function bt(n,t){t.clipboardData.types.includes("text/plain")&&n.enterEditMode()}function xt(n,t){let{element:e,picker:i}=n;if(!i.active&&!R(e))return;let s=i.element;me(t,a=>a===e||a===s)||De(n)}function St(n,t){return n.map(e=>$(e,t.format,t.locale)).join(t.dateDelimiter)}function Mt(n,t,e=!1){if(t.length===0)return e?[]:void 0;let{config:i,dates:s,rangeSideIndex:a}=n,{pickLevel:r,maxNumberOfDates:o}=i,c=t.reduce((d,l)=>{let u=_(l,i.format,i.locale);return u===void 0||(u=M(u,r,a),G(u,i.minDate,i.maxDate)&&!d.includes(u)&&!i.checkDisabled(u,r)&&(r>0||!i.daysOfWeekDisabled.includes(new Date(u).getDay()))&&d.push(u)),d},[]);if(c.length!==0)return i.multidate&&!e&&(c=c.reduce((d,l)=>(s.includes(l)||d.push(l),d),s.filter(d=>!c.includes(d)))),o&&c.length>o?c.slice(o*-1):c}function be(n,t=3,e=!0,i=void 0){let{config:s,picker:a,inputField:r}=n;if(t&2){let o=a.active?s.pickLevel:s.startView;a.update(i).changeView(o).render(e)}t&1&&r&&(r.value=St(n.dates,s))}function kt(n,t,e){let i=n.config,{clear:s,render:a,autohide:r,revert:o,forceRefresh:c,viewDate:d}=e;a===void 0&&(a=!0),a?r===void 0&&(r=i.autohide):r=c=!1,d=_(d,i.format,i.locale);let l=Mt(n,t,s);!l&&!o||(l&&l.toString()!==n.dates.toString()?(n.dates=l,be(n,a?3:1,!0,d),Y(n,"changeDate")):be(n,c?3:1,!0,d),r&&n.hide())}function vt(n,t){return t?e=>$(e,t,n.config.locale):e=>new Date(e)}var N=class{constructor(t,e={},i=void 0){t.datepicker=this,this.element=t,this.dates=[];let s=this.config=Object.assign({buttonClass:e.buttonClass&&String(e.buttonClass)||"button",container:null,defaultViewDate:F(),maxDate:void 0,minDate:void 0},ne(ie,this)),a;if(t.tagName==="INPUT"?(a=this.inputField=t,a.classList.add("datepicker-input"),e.container&&(s.container=e.container instanceof HTMLElement?e.container:document.querySelector(e.container))):s.container=t,i){let l=i.inputs.indexOf(a),u=i.datepickers;if(l<0||l>1||!Array.isArray(u))throw Error("Invalid rangepicker object.");u[l]=this,this.rangepicker=i,this.rangeSideIndex=l}this._options=e,Object.assign(s,ne(e,this)),s.shortcutKeys=Ne(e.shortcutKeys||{});let r=Me(t.value||t.dataset.date,s.dateDelimiter);delete t.dataset.date;let o=Mt(this,r);o&&o.length>0&&(this.dates=o),a&&(a.value=St(this.dates,s));let c=this.picker=new re(this),d=[t,"keydown",pt.bind(null,this)];a?X(this,[d,[a,"focus",yt.bind(null,this)],[a,"mousedown",wt.bind(null,this)],[a,"click",Dt.bind(null,this)],[a,"paste",bt.bind(null,this)],[document,"mousedown",xt.bind(null,this)],[window,"resize",c.place.bind(c)]]):(X(this,[d]),this.show())}static formatDate(t,e,i){return $(t,e,i&&Z[i]||Z.en)}static parseDate(t,e,i){return _(t,e,i&&Z[i]||Z.en)}static get locales(){return Z}get active(){return!!(this.picker&&this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(t){let e=ne(t,this);Object.assign(this._options,t),Object.assign(this.config,e),this.picker.setOptions(e),be(this,3)}show(){if(this.inputField){let{config:t,inputField:e}=this;if(e.disabled||e.readOnly&&!t.enableOnReadonly)return;!R(e)&&!t.disableTouchKeyboard&&(this._showing=!0,e.focus(),delete this._showing)}this.picker.show()}hide(){this.inputField&&(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}toggle(){this.picker.active?this.inputField&&this.picker.hide():this.show()}destroy(){this.hide(),Fe(this),this.picker.detach();let t=this.element;return t.classList.remove("datepicker-input"),delete t.datepicker,this}getDate(t=void 0){let e=vt(this,t);if(this.config.multidate)return this.dates.map(e);if(this.dates.length>0)return e(this.dates[0])}setDate(...t){let e=[...t],i={},s=U(t);s&&typeof s=="object"&&!Array.isArray(s)&&!(s instanceof Date)&&Object.assign(i,e.pop());let a=Array.isArray(e[0])?e[0]:e;kt(this,a,i)}update(t=void 0){if(!this.inputField)return;let e=Object.assign(t||{},{clear:!0,render:!0,viewDate:void 0}),i=Me(this.inputField.value,this.config.dateDelimiter);kt(this,i,e)}getFocusedDate(t=void 0){return vt(this,t)(this.picker.viewDate)}setFocusedDate(t,e=!1){let{config:i,picker:s,active:a,rangeSideIndex:r}=this,o=i.pickLevel,c=_(t,i.format,i.locale);c!==void 0&&(s.changeFocus(M(c,o,r)),a&&e&&s.changeView(o),s.render())}refresh(t=void 0,e=!1){t&&typeof t!="string"&&(e=t,t=void 0);let i;t==="picker"?i=2:t==="input"?i=1:i=3,be(this,i,!e)}enterEditMode(){let t=this.inputField;!t||t.readOnly||!this.picker.active||this.editMode||(this.editMode=!0,t.classList.add("in-edit"))}exitEditMode(t=void 0){if(!this.inputField||!this.editMode)return;let e=Object.assign({update:!1},t);delete this.editMode,this.inputField.classList.remove("in-edit"),e.update&&this.update(e)}};Object.assign(N.locales,P);var oe=class extends xe.Modal{constructor(e,i,s){super(e);this._settings=i;this._editor=s;this._isSelected=!1;this._isClosed=!1;let{format:a}=i.dateFormatSpecs[1];a&&this.modalEl.style.setProperty("--date-inserter-modal-height","calc(388px + 2.5rem)")}onOpen(){this.modalEl.addClass("date-inserter-modal");let e=this.contentEl.createEl("input");e.addClass("invisible-input"),e.setAttrs({type:"text",readonly:!0});let i=this.generateOptions(this._settings),s=new N(e,i);s.show(),e.addEventListener("hide",a=>{setTimeout(()=>{this._isClosed||(s.show(),s.setFocusedDate(a.detail.viewDate))},0)}),e.addEventListener("changeDate",()=>{this._isSelected||(this._isSelected=!0,this._editor?this.insertDateToCursorPosition(e.value,this._editor):navigator.clipboard&&navigator.clipboard.writeText(e.value).then(()=>new xe.Notice("Date copied to clipboard.")),setTimeout(()=>this.close(),0))}),this._settings.dateFormatSpecs.filter(({format:a})=>a).length>1&&this.setupFormatButtons(s)}onClose(){this._isClosed=!0,this.contentEl.empty(),this.modalEl.style.removeProperty("--date-inserter-modal-height")}insertDateToCursorPosition(e,i){let s=i.getCursor("from"),a=i.getCursor("to");i.replaceRange(e,s,a),i.setCursor(s.line,s.ch+e.length)}generateOptions(e){let{sun:i,mon:s,tue:a,wed:r,thu:o,fri:c,sat:d}=e.daysOfWeekHighlighted,l=[i,s,a,r,o,c,d].filter(m=>m!==void 0),u=e.dateFormatSpecs[0].format||A.dateFormatSpecs[0].format;return{language:e.language,daysOfWeekHighlighted:l,weekStart:e.weekStart,todayHighlight:e.todayHighlight,format:u,defaultViewDate:this.getStartDate(e.dateFormatSpecs,e.defaultDate==="today")}}getStartDate(e,i){let s=this._editor;if(!s)return;let a=s.getSelection(),{line:r,ch:o}=s.getCursor(),c=a||s.getLine(r);for(let d of e){let l=this.calcParseRange(d,c,o,!!a),u=this.parseSelection(d.format,c.substring(...l));if(u)return a||s.setSelection({line:r,ch:l[0]},{line:r,ch:l[1]}),i?void 0:u}}calcParseRange(e,i,s,a=!1){if(i.length<e.minLength)return[s,s];let[r,o]=a?[0,i.length]:this.calcSearchRange(e,s),c=i.slice(r,o);for(let d of c.matchAll(new RegExp(e.regex,"g"))){let l=r+(d.index||0),u=r+(d.index||0)+d[0].length;if(a||l<=s&&s<=u)return[l,u]}return[s,s]}parseSelection(e,i){let s=this._settings.language||A.language,a=N.parseDate(i,e,s);return a&&N.formatDate(a,e,s)===i?a:void 0}calcSearchRange(e,i){let s=e.maxLength,a=Math.max(0,i-s),r=s+i;return[a,r]}setupFormatButtons(e){this.contentEl.createDiv("format-buttons",i=>{let[s,a]=this._settings.dateFormatSpecs.map(({format:c})=>c),r=i.createEl("button");r.createSpan("").textContent=s||A.format,r.addEventListener("click",()=>{e.config.format=s,r.addClass("selected"),o.removeClass("selected")}),r.addClass("selected");let o=i.createEl("button");o.createSpan("").textContent=a,o.addEventListener("click",()=>{e.config.format=a,o.addClass("selected"),r.removeClass("selected")}),this.modalEl.addEventListener("keyup",c=>{switch(c.key){case"1":r.click();break;case"2":o.click();break;default:}})})}};var ke=class extends Ot.Plugin{async onload(){await this.loadSettings(),this.addCommand({id:"open-calendar",name:"Open Calendar",editorCallback:t=>{new oe(this.app,this.settings,t).open()}}),this.addCommand({id:"copy-date-to-clipboard",name:"Copy Date to Clipboard",callback:()=>{new oe(this.app,this.settings).open()}}),this._settingTab=new de(this.app,this),this.addSettingTab(this._settingTab)}async loadSettings(){this.settings=Object.assign({},A,await this.loadData()),this.migrateSettingValues()}async saveSettings(){await this.saveData(this.settings)}async migrateSettingValues(){var e;if(((e=this.settings.dateFormatSpecs)==null?void 0:e.length)>1)return;let t=[{format:this.settings.format||A.dateFormatSpecs[0].format,regex:"",minLength:0,maxLength:0},{format:this.settings.format2||"",regex:"",minLength:0,maxLength:0}];this.settings.dateFormatSpecs=t,this.settings.defaultDate=A.defaultDate,delete this.settings.format,delete this.settings.format2,await this.saveSettings(),await this._settingTab.updateDateFormatSpecs()}};

/* nosourcemap */